<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Homebrew Version Compatibility Check</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/@ruby/3.4-wasm-wasi@2.8.1/dist/browser.script.iife.js"></script>
    <script type="text/ruby" src="./app.rb"></script>
    <script defer src="./app.js"></script>
  </head>
  <body>
    <main class="shell">
      <header>
        <p class="eyebrow">Brew Formula Helper</p>
        <h1>Version and URL Compatibility Checker</h1>
        <p>
          Uses a Ruby WebAssembly port of Homebrew logic to detect versions and generate
          the bumped source URL Homebrew would produce for a manually entered target version.
        </p>
      </header>

      <section class="panel">
        <label for="formulaName">Formula name (optional)</label>
        <input id="formulaName" type="text" placeholder="e.g. wget" />

        <label for="sourceUrl">Source URL</label>
        <input
          id="sourceUrl"
          type="url"
          placeholder="https://github.com/org/project/archive/v1.2.3.tar.gz"
        />

        <label for="currentVersion">Current version override (optional)</label>
        <input
          id="currentVersion"
          type="text"
          placeholder="If omitted, Homebrew logic detects from URL"
        />

        <label for="targetVersion">Target version (manual)</label>
        <input id="targetVersion" type="text" placeholder="e.g. 1.3.0" />

        <button id="checkBtn" type="button">Generate and Check</button>
      </section>

      <section id="resultPanel" class="panel hidden" aria-live="polite">
        <h2 id="resultTitle"></h2>
        <p id="resultSummary"></p>
        <div id="resultValues">
          <div class="resultValueCard">
            <h3>Detected Version In URL</h3>
            <code id="detectedVersionValue"></code>
          </div>
          <div class="resultValueCard">
            <h3>Homebrew-Generated URL</h3>
            <code id="generatedUrlValue"></code>
          </div>
        </div>
        <ul id="resultChecks"></ul>
      </section>
    </main>
  </body>
</html>
